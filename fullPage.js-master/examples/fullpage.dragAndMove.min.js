/*!
 * fullpage.js Drag And Move Extension 0.0.8 for fullPage.js v3
 * https://github.com/alvarotrigo/fullPage.js
 *
 * @license This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
window.fp_dragAndMoveExtension=function(){var g=this,w=fp_utils,h=fp_utils.$,n=fullpage_api.getFullpageData(),p=n.options,M=n.internals,r=".fullpage-wrapper",e=".active",b=".fp-section",A=b+e,S=".fp-slide"+e,a=".fp-slides",E=".fp-slidesContainer";g.isGrabbing=!1,g.isAnimating=!1;var l,L,s,t,o,y,T,D,i,u=0,C=null,x=null,d=0,c=0,v=.01,m=.85,F=0,G=0,H=0,B=0,_=0,k=0,q=g.isMouseDown=!1,z=0,f=!1,P=w.css,O=w.trigger,R=w.prev,W=w.next,I=w.closest,N=M.getMSPointer();function Y(){g.isAnimating&&(function(){var n,e;q?(n=M.getDestinationPosition(x),e=F):null!=x&&(n=x.offsetLeft,e=G),X((null!=x?-1*n-e:0)*v),l=q?F<H?"up":H<F?"down":"none":G<B?"left":B<G?"right":"none",g.isGrabbing&&X(q?H-F-d:B-G-c);var t,o,i=q?F:G;!g.isGrabbing&&i<0&&M.scrollHandler(),q?(F+=d*=m,O(y,"onScroll")):G+=c*=m,g.isGrabbing||g.isMouseDown||(t=i,o=q?F:G,Math.round(100*o)==Math.round(100*t)&&u++,2<u&&(g.isAnimating=!1))}(),function(){var n=q?y:h(E,L)[0];if(null!=n)if(p.css3&&(!q||q&&p.autoScrolling&&!p.scrollBar)){var e=q?"translate3d(0px, "+Math.round(F)+"px, 0px)":"translate3d("+Math.round(G)+"px, 0px, 0px)";P(n,M.getTransforms(e))}else p.autoScrolling&&!p.scrollBar&&q?P(n,{top:Math.round(F)}):q?window.scrollTo(0,Math.round(-F)):I(n,a).scrollLeft=-1*Math.round(G)}()),t=window.requestAnimFrame(Y)}function V(n){var e=n.detail,t=e.value;void 0!==e.directions||(t?g.init():g.destroy())}function X(n){q?d+=n:c+=n}function $(n){if(window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",$),f)f=!1;else{var e=q?w.getWindowHeight():window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth;if((z<30||z<e/2&&!(l===C))&&(x=q?h(A)[0]:h(S,h(A)[0])[0]),!q&&x&&g.isGrabbing&&g.isAnimating){var t=h(a,L)[0];null!=t&&M.landscapeScroll(t,x,C)}if(O(y,"onGrab",!1),g.isGrabbing=!1,g.isMouseDown=!1,!s)if(q){var o={up:null!=R(h(A)[0])?W(x):h(A)[0],down:null!=W(h(A)[0])?R(x):h(A)[0]};if(o[C]){var i=h(S,o[C])[0];"none"!==C&&null!=i&&M.silentLandscapeScroll(i,"internal")}}else M.silentScroll(M.getDestinationPosition(h(A)[0]))}}function j(n){if(u=0,g.isMouseDown=!fullpage_api.shared.isNormalScrollElement,(new Date).getTime(),M.isReallyTouch(n)){var e=M.getEventsPage(n);T=e.y,D=e.x,_=g.getCurrentScroll(),k=g.getCurrentScrollSlides(n),["touchmove",N.move].forEach(function(n){window.addEventListener(n,Q,{passive:!1})}),window.addEventListener("touchend",$)}}function J(n){y=y||h(r)[0],n.target===h("html")[0]||3==n.which?(f=!0,p.fitToSection=!0):(s=u,u=0,g.isMouseDown=!fullpage_api.shared.isNormalScrollElement,(new Date).getTime(),T=K(n,"y"),D=K(n,"x"),_=g.getCurrentScroll(),k=g.getCurrentScrollSlides(n),Q(n)),window.addEventListener("mousemove",Q),window.addEventListener("mouseup",$)}function K(n,e){var t="x"===e;if(M.isTouch&&M.isReallyTouch(n)){var o=M.getEventsPage(n);return t?o.x:o.y}return t?n.pageX:p.scrollBar||!p.autoScrolling?n.screenY:n.pageY}function Q(n){var e,t;t=K(n,"x");var o,i,r,a,l,s=(e=K(n,"y"))-T,u=t-D;if(!(Math.abs(s)<5&&Math.abs(u)<5||Math.abs(s)<5&&Math.abs(s)>Math.abs(u)||Math.abs(u)<5&&Math.abs(u)>Math.abs(s))){if(g.isMouseDown){if(!g.isGrabbing){q=Math.abs(s)>Math.abs(u),M.removeAnimation(y);var d=h(E,L)[0];null!=d&&M.removeAnimation(d)}O(y,"onGrab",!0),g.isGrabbing=!0}var c=I(n.target,b),v=c?h(S,c)[0]:null,m=h(A)[0],f={up:R(m),down:W(m),left:v?R(v):null,right:v?W(v):null,none:m};g.isGrabbing&&(F=g.getCurrentScroll(),G=g.getCurrentScrollSlides(n),i=t,r=e,a=q?T:D,l=q?r:i,z=Math.abs(a-l),x=null!=(o=x=f[C=l<a?q?"down":"right":a<l?q?"up":"left":"none"])?o:q?h(A)[0]:h(S,L)[0],g.isAnimating="vertical"!==p.dragAndMove&&"horizontal"!==p.dragAndMove||"vertical"===p.dragAndMove&&q||"horizontal"===p.dragAndMove&&!q,g.isAnimating=g.isAnimating&&M.isScrollAllowed.m[C]),H=_+s,B=k+u,g.isAnimating&&w.preventDefault(n)}}function U(n){var e=n?"addEventListener":"removeEventListener";["touchstart",N.down].forEach(function(n){y[e](n,M.touchStartHandler)}),["touchmove",N.move].forEach(function(n){y[e](n,M.touchMoveHandler)})}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){t=window.setTimeout(n,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(n){window.clearTimeout(n)},g.init=function(n){return o=o||w.deepExtend({},p).dragAndMove,p.dragAndMove=o,p.fitToSection=!1,["continuousHorizontal","continuousVertical"].forEach(function(n){p[n]&&(p[n]=!1,w.showError("error","The option `"+n+"` is not compatible with `dragAndDrop`; `"+n+"` desactivated."))}),p.scrollOverflow&&w.showError("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging"),"fingersonly"!==p.dragAndMove&&window.addEventListener("mousedown",J),M.container.addEventListener("setAllowScrolling",V),Y(),g.turnOffTouch(),g},g.turnOffTouch=function(){y=y||h(r)[0],"mouseonly"!==p.dragAndMove&&null!=y&&(U(!1),"mouseonly"!==p.dragAndMove&&["touchstart",N.down].forEach(function(n){y.addEventListener(n,j)}))},g.getCurrentScroll=function(){if(!p.css3||!p.autoScrolling||p.scrollBar)return p.autoScrolling&&!p.scrollBar?parseInt(getComputedStyle(y).top):-w.getScrollTop();var n=getComputedStyle(y).transform;return void 0!==(n=void 0===n?getComputedStyle(y)["-webkit-transform"]:n)?parseInt(n.split(",")[5]):void 0},g.getCurrentScrollSlides=function(n){var e=I(n.target,b);null==(L=null!=e?e:L)&&(L=h(A)[0]);var t=h(a,L)[0];if(null!=t){var o=h(E,t)[0];if(!p.css3)return-t.scrollLeft;var i=getComputedStyle(o).transform;if(void 0!==(i=void 0===i?h(r).css("-webkit-transform"):i))return"none"===i?0:parseInt(i.split(",")[4])}return 0},g.getDocumentHeight=function(){var t=0,n=h(b),o=n.length;return n.forEach(function(n,e){e!==o&&(t+=n.offsetHeight)}),t},g.destroy=function(){["touchstart",N.down].forEach(function(n){y.removeEventListener(n,j)}),["touchmove",N.move].forEach(function(n){y.removeEventListener(n,Q,{passive:!1})}),y.removeEventListener("touchend",$),window.removeEventListener("mousedown",J),window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",$),window.cancelAnimFrame(t),t=void 0,U(!(p.dragAndMove=!1))},g.isScrollingDown=function(){return!q&&i?i:i="down"===C},g.c=M.c;var Z=g["common".charAt(0)];return"complete"===document.readyState&&Z("dragAndMove"),window.addEventListener("load",function(){Z("dragAndMove")}),g};